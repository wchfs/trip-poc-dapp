# Rust DApp - Point in Polygon

This DApp is based on the example Echo Rust DApp

The real-life goal of this proof of concept:
- Be able to pay for the parking based on your localization and predefined paid parking regions.

Stages for this DApp:
1. Be able to send GPS coordinates and check if the point is in the defined polygon (DONE)
2. User interface that provides functionality to send user localization (Point with coordinates) (TODO)
3. Be able to provide generated GEOJSON file that defines a new polygon or multi polygon.
4. UI is able to GET GEOJSON and generate a map based on that data.
5. User is able to pay.
6. And there are a few other ideas!

## Running the back-end in host mode

Docker Host environment up
```shell
docker compose -f ./docker-compose.yml -f ./docker-compose.override.yml -f ./docker-compose-host.yml up
```

Docker Host environment down
```shell
docker compose -f ./docker-compose.yml -f ./docker-compose.override.yml -f ./docker-compose-host.yml down -v
```

Rust instance
```shell
cd echo-rust/
ROLLUP_HTTP_SERVER_URL="http://127.0.0.1:5004" cargo run
```

After the back-end successfully starts, it should print an output like the following:
```log
Sending finish
```

## Interacting with the application

We can use the frontend-console application to interact with the DApp.
```log
https://github.com/cartesi/rollups-examples/tree/main/frontend-console
```

First, go to a separate terminal window and switch to the `frontend-console` directory:
```shell
cd frontend-console
```

Default data format is: "{Longitude},{Latitude}"
Then, send an input as follows:
```shell
yarn start send --input "19.943540573120117,50.0565299987793"
```

In order to verify the notices generated by your inputs, run the command:
```shell
yarn start notices
```

The response should be something like this:
```json
[{"epoch":"0","input":"1","notice":"0","payload":"1"}]
```

- 1 - means that point is in the zone
- 0 - means that point is not in the zone
